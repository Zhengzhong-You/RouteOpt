cmake_minimum_required(VERSION 3.10)
project(cvrpsep LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

file(GLOB CVRPSEP_SOURCES "*.cpp")

add_library(cvrpsep STATIC ${CVRPSEP_SOURCES})
target_include_directories(cvrpsep PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})

set_target_properties(cvrpsep PROPERTIES OUTPUT_NAME "cvrpsep")

# Match legacy Makefile output location.
set(CVRPSEP_ARCHIVE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/obj")
set_target_properties(cvrpsep PROPERTIES ARCHIVE_OUTPUT_DIRECTORY "${CVRPSEP_ARCHIVE_DIR}")

set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CVRPSEP_ARCHIVE_DIR}")
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_RELEASE "${CVRPSEP_ARCHIVE_DIR}")
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_DEBUG "${CVRPSEP_ARCHIVE_DIR}")
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_RELWITHDEBINFO "${CVRPSEP_ARCHIVE_DIR}")
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_MINSIZEREL "${CVRPSEP_ARCHIVE_DIR}")

# Mirror the Makefile's -D$(OS) behavior.
if (CMAKE_SYSTEM_NAME)
    target_compile_definitions(cvrpsep PRIVATE ${CMAKE_SYSTEM_NAME})
endif ()
