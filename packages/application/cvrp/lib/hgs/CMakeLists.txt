cmake_minimum_required(VERSION 3.12)
project(hgscvrp)

set(CMAKE_CXX_STANDARD 20)

set(SOURCES
    src/Split.cpp
    src/Population.cpp
    src/Params.cpp
    src/my_hgs.cpp
    src/LocalSearch.cpp
    src/InstanceCVRPLIB.cpp
    src/Individual.cpp
    src/Genetic.cpp
    src/C_Interface.cpp
    src/AlgorithmParameters.cpp
)


include_directories(${CMAKE_CURRENT_SOURCE_DIR})
include_directories(${CMAKE_CURRENT_SOURCE_DIR}/src)


if (WIN32)
    add_library(hgscvrp STATIC ${SOURCES})
else ()
    add_library(hgscvrp SHARED ${SOURCES})
endif ()


set_target_properties(hgscvrp PROPERTIES OUTPUT_NAME "hgscvrp")

set(HGS_OUTPUT_DIR ${CMAKE_CURRENT_SOURCE_DIR}/lib)
set_target_properties(hgscvrp PROPERTIES
    ARCHIVE_OUTPUT_DIRECTORY ${HGS_OUTPUT_DIR}
    LIBRARY_OUTPUT_DIRECTORY ${HGS_OUTPUT_DIR}
    RUNTIME_OUTPUT_DIRECTORY ${HGS_OUTPUT_DIR}
    ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${HGS_OUTPUT_DIR}
    ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${HGS_OUTPUT_DIR}
    ARCHIVE_OUTPUT_DIRECTORY_RELWITHDEBINFO ${HGS_OUTPUT_DIR}
    ARCHIVE_OUTPUT_DIRECTORY_MINSIZEREL ${HGS_OUTPUT_DIR}
    LIBRARY_OUTPUT_DIRECTORY_DEBUG ${HGS_OUTPUT_DIR}
    LIBRARY_OUTPUT_DIRECTORY_RELEASE ${HGS_OUTPUT_DIR}
    LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO ${HGS_OUTPUT_DIR}
    LIBRARY_OUTPUT_DIRECTORY_MINSIZEREL ${HGS_OUTPUT_DIR}
    RUNTIME_OUTPUT_DIRECTORY_DEBUG ${HGS_OUTPUT_DIR}
    RUNTIME_OUTPUT_DIRECTORY_RELEASE ${HGS_OUTPUT_DIR}
    RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO ${HGS_OUTPUT_DIR}
    RUNTIME_OUTPUT_DIRECTORY_MINSIZEREL ${HGS_OUTPUT_DIR}
)

install(TARGETS hgscvrp DESTINATION ${CMAKE_CURRENT_SOURCE_DIR}/lib)
